<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kadam Foundation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Elite Public Styles -->
  <link rel="stylesheet" href="index.css">
</head>

<body class="theme-glass">
<div class="progress-bar" id="progressBar"></div>
<div class="cursor-glow" id="cursorGlow"></div>
  
<header class="hero reveal">
  <img id="siteLogo" src="logo.png" style="width:120px;">
  <h1 id="mainTitle">Kadam Foundation</h1>
  <p id="founderLine">Founder: Prachi Dwivedi</p>
</header>

<section class="section-block reveal">
  <h2 id="hallHeading">Hall of Fame</h2>
  <div class="cards" id="hofContainer"></div>
</section>

<div class="wave"></div>

<section class="section-block reveal">
  <h2 id="testimonialHeading">What People Say</h2>
  <div class="cards" id="testimonialContainer"></div>
</section>

<div class="wave"></div>

<section class="section-block reveal">
  <h2 id="eventHeading">Upcoming Events</h2>
  <div class="cards" id="eventContainer"></div>
</section>

<div class="wave"></div>

<section class="section-block reveal">
  <h2 id="supportHeading">Support Us</h2>
  <img id="donationQR" style="width:250px;">
</section>

<div class="wave"></div>

<section class="section-block reveal">
  <h2 id="connectHeading">Connect With Us</h2>
  <div id="socialContainer"></div>
</section>

<footer style="text-align:center;padding:40px 20px;">
  Â© Kadam Foundation
</footer>

<!-- ================= FLOATING MENU ================= -->

<button class="floating-btn" onclick="togglePopup()">
  <div class="hamburger"></div>
</button>

<div class="popup-menu" id="popupMenu">
  <a href="index.html">Home</a>
  <a href="apply.html">Apply</a>
  <a href="members.html">Members</a>
  <a href="admin.html">Admin</a>
  <hr style="border:1px solid rgba(255,255,255,0.2);margin:10px 0;">
  <button onclick="openThemeModal()">ðŸŽ¨ Change Theme</button>
</div>

<!-- ================= THEME MODAL ================= -->

<div class="modal-overlay" id="themeModal">
  <div class="modal-box">
    <h3>Select Theme</h3>
    <button onclick="applyTheme('theme-glass')">Glass</button>
    <button onclick="applyTheme('theme-clean')">Clean</button>
    <button onclick="applyTheme('theme-youth')">Youth</button>
    <button onclick="applyTheme('theme-dark')">Dark Premium</button>
    <br><br>
    <button class="close-btn" onclick="closeThemeModal()">Close</button>
  </div>
</div>

<script>

/* ================= LOAD DATA ================= */

async function loadWebsiteData(){
  const res = await fetch("/data");
  const data = await res.json();

  // Hall of Fame
  let hofHTML = "";
  data.hof.forEach(img=>{
    hofHTML += `<div class="card reveal"><img src="${img}"></div>`;
  });
  document.getElementById("hofContainer").innerHTML = hofHTML;

  // Testimonials
  let tHTML = "";
  data.testimonials.forEach(t=>{
    tHTML += `<div class="card reveal"><h3>${t.name}</h3><p>${t.text}</p></div>`;
  });
  document.getElementById("testimonialContainer").innerHTML = tHTML;

  // Events
  let eHTML = "";
  data.events.forEach(e=>{
    eHTML += `
      <div class="card reveal">
        ${e.image ? `<img src="${e.image}">` : ""}
        <h3>${e.title}</h3>
        <p>${e.date}</p>
        ${e.brochure ? `<img src="${e.brochure}">` : ""}
      </div>`;
  });
  document.getElementById("eventContainer").innerHTML = eHTML;

  // Donation QR
  if(data.donationQR){
    document.getElementById("donationQR").src = data.donationQR;
  }

  // Social Links
  let sHTML = "";
  data.socialLinks.forEach(s=>{
    sHTML += `<div><a style="color:inherit;" href="${s.link}" target="_blank">${s.name}</a></div>`;
  });
  document.getElementById("socialContainer").innerHTML = sHTML;

  revealOnScroll();
}

window.onload = function(){
  loadWebsiteData();

  const savedTheme = localStorage.getItem("selectedTheme");
  if(savedTheme){
    document.body.className = savedTheme;
  }

  revealOnScroll();
};

/* ================= REVEAL ================= */

function revealOnScroll(){
  const reveals = document.querySelectorAll(".reveal");
  reveals.forEach(el=>{
    const top = el.getBoundingClientRect().top;
    if(top < window.innerHeight - 100){
      el.classList.add("active");
    }
  });
}

window.addEventListener("scroll", revealOnScroll);

/* ================= ULTRA ELITE SYSTEM ================= */

const popup = document.getElementById("popupMenu");
const btn = document.querySelector(".floating-btn");
const modal = document.getElementById("themeModal");
const progressBar = document.getElementById("progressBar");
const cursorGlow = document.getElementById("cursorGlow");

/* Scroll Progress */
window.addEventListener("scroll", ()=>{
  const scrollTop = window.scrollY;
  const height = document.body.scrollHeight - window.innerHeight;
  const progress = (scrollTop / height) * 100;
  progressBar.style.width = progress + "%";
});

/* Magnetic Card Effect */
document.addEventListener("mousemove", e=>{
  document.querySelectorAll(".card").forEach(card=>{
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    if(x > 0 && x < rect.width && y > 0 && y < rect.height){
      card.style.transform =
        `rotateX(${(y - rect.height/2)/15}deg)
         rotateY(${(x - rect.width/2)/15}deg)
         scale(1.05)`;
    } else {
      card.style.transform = "";
    }
  });

  /* Cursor glow */
  cursorGlow.style.left = e.clientX + "px";
  cursorGlow.style.top = e.clientY + "px";
});

/* Popup Toggle */
function togglePopup(){
  popup.classList.toggle("show");
  btn.classList.toggle("active");
}

/* Close popup on outside click */
document.addEventListener("click", e=>{
  if(!popup.contains(e.target) && !btn.contains(e.target)){
    popup.classList.remove("show");
    btn.classList.remove("active");
  }
});

/* Modal */
function openThemeModal(){
  modal.classList.add("show");
  popup.classList.remove("show");
}

function closeThemeModal(){
  modal.classList.remove("show");
}

/* Theme */
function applyTheme(theme){
  document.body.className = theme;
  localStorage.setItem("selectedTheme", theme);
  closeThemeModal();
}

</script>

</body>
</html>
